<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="XiaoZhiAI_MAUI.Pages.SettingsPage"
             Title="设置">
    <ScrollView BackgroundColor="#F8F8F8">
        <VerticalStackLayout Spacing="25" Padding="20">
            <!-- 标题区域 -->
            <Frame BackgroundColor="White" CornerRadius="12" HasShadow="False" Padding="20,15">
                <StackLayout Spacing="5">
                    <Label Text="🔧 连接设置" FontSize="20" FontAttributes="Bold" TextColor="#333" />
                    <Label Text="配置小智AI服务器连接参数" FontSize="14" TextColor="#666" />
                </StackLayout>
            </Frame>
            
            <!-- 服务器URL设置 -->
            <Frame BackgroundColor="White" CornerRadius="12" HasShadow="False" Padding="20">
                <StackLayout Spacing="12">
                    <Label Text="🌐 服务器URL" FontSize="16" FontAttributes="Bold" TextColor="#333" />
                    <Label Text="WebSocket服务器连接地址" FontSize="13" TextColor="#666" />
                    <Border Stroke="#E0E0E0" StrokeThickness="1" StrokeShape="RoundRectangle 8" BackgroundColor="#F8F8F8">
                        <Entry x:Name="UrlEntry" 
                               Placeholder="wss://api.tenclass.net/xiaozhi/v1/" 
                               BackgroundColor="Transparent"
                               TextColor="#333"
                               PlaceholderColor="#999"
                               FontSize="14"
                               Margin="10,5" />
                    </Border>
                </StackLayout>
            </Frame>

            <!-- MAC地址设置 -->
            <Frame BackgroundColor="White" CornerRadius="12" HasShadow="False" Padding="20">
                <StackLayout Spacing="12">
                    <Label Text="🏷️ MAC地址" FontSize="16" FontAttributes="Bold" TextColor="#333" />
                    <Label Text="设备唯一标识符" FontSize="13" TextColor="#666" />
                    <Border Stroke="#E0E0E0" StrokeThickness="1" StrokeShape="RoundRectangle 8" BackgroundColor="#F8F8F8">
                        <Entry x:Name="MacEntry" 
                               Placeholder="自动获取设备MAC地址" 
                               BackgroundColor="Transparent"
                               TextColor="#333"
                               PlaceholderColor="#999"
                               FontSize="14"
                               Margin="10,5" />
                    </Border>
                </StackLayout>
            </Frame>

            <!-- OTA地址设置 -->
            <Frame BackgroundColor="White" CornerRadius="12" HasShadow="False" Padding="20">
                <StackLayout Spacing="12">
                    <Label Text="🔄 OTA地址" FontSize="16" FontAttributes="Bold" TextColor="#333" />
                    <Label Text="设备更新和配置服务器地址" FontSize="13" TextColor="#666" />
                    <Border Stroke="#E0E0E0" StrokeThickness="1" StrokeShape="RoundRectangle 8" BackgroundColor="#F8F8F8">
                        <Entry x:Name="OtaEntry" 
                               Placeholder="https://api.tenclass.net/xiaozhi/ota/" 
                               BackgroundColor="Transparent"
                               TextColor="#333"
                               PlaceholderColor="#999"
                               FontSize="14"
                               Margin="10,5" />
                    </Border>
                </StackLayout>
            </Frame>

                         <!-- 后台服务控制 -->
             <Frame BackgroundColor="White" CornerRadius="12" HasShadow="False" Padding="20">
                 <StackLayout Spacing="12">
                     <Label Text="🔄 后台运行" FontSize="16" FontAttributes="Bold" TextColor="#333" />
                     <Label Text="启用后应用可在后台保持连接" FontSize="13" TextColor="#666" />
                     <Grid ColumnDefinitions="*,Auto,Auto">
                         <Label Grid.Column="0" Text="后台服务" FontSize="14" TextColor="#333" VerticalOptions="Center"/>
                         <Label Grid.Column="1" x:Name="BackgroundStatusLabel" Text="未启动" FontSize="12" TextColor="#999" VerticalOptions="Center" Margin="0,0,10,0"/>
                         <Switch Grid.Column="2" x:Name="BackgroundSwitch" Toggled="OnBackgroundSwitchToggled"/>
                     </Grid>
                 </StackLayout>
             </Frame>

             <!-- 保存按钮 -->
             <Button Text="💾 保存设置" 
                     FontSize="16"
                     FontAttributes="Bold"
                     BackgroundColor="#007AFF" 
                     TextColor="White" 
                     CornerRadius="12"
                     HeightRequest="50"
                     Margin="0,10,0,0"
                     Clicked="OnSaveClicked" />
                    
            <!-- 说明文字 -->
            <Frame BackgroundColor="#FFF3CD" CornerRadius="8" HasShadow="False" Padding="15" BorderColor="#FFD60A">
                <StackLayout Spacing="8">
                    <Label Text="⚠️ 重要提示" FontSize="14" FontAttributes="Bold" TextColor="#B76E00" />
                    <Label Text="• 修改设置后需要重新连接才能生效" FontSize="12" TextColor="#B76E00" />
                    <Label Text="• MAC地址将自动生成，通常不需要手动修改" FontSize="12" TextColor="#B76E00" />
                    <Label Text="• 服务器地址必须是有效的WebSocket URL" FontSize="12" TextColor="#B76E00" />
                </StackLayout>
            </Frame>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage> 